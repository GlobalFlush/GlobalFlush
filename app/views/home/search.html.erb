<h1>Search Bathrooms</h1>

<%= params.inspect %>
<%= current_keyword = params[:keyword] %>

<div id="search_form">
  <% form_tag search_url, :method => 'get' do %>
      <%= text_field_tag :keyword, params[:keyword], :value => current_keyword %>
      <%= submit_tag "Search", :name => nil %>
  <% end %>
</div>

<% if @bathrooms.empty? %>
    <p>There are no such matching bathrooms. Please try again.</p>
<% else %>

    <div id="filter">
      Sort by:
      <%= link_to 'Male', :action => 'search', :controller => 'home', :keyword => current_keyword, :gender => 'Male', :method => 'get' %>
      <%= link_to 'Female', :action => 'search', :controller => 'home', :keyword => current_keyword, :gender => 'Female', :method => 'get' %>
      
      
    </div>

    <div id="bathroom_list">

      <% @bathrooms.each do |bathroom| %>
          <div class="list_item">
            <div class="male">
              <span class="right">Last updated at <%= bathroom.updated_at %></span><%= link_to bathroom.title, bathroom %>
            </div>
            <% if bathroom.bathroom_photos.empty? %>
                <%= link_to image_tag("/images/no_image.png", :height=>80, :width=>100), bathroom %>
            <% else %>
                <%= link_to image_tag(bathroom.bathroom_photos.first.photo.url(:thumb), :height=>80, :width=>100), bathroom %>
            <% end %>
            <% bathroom.bathroom_specs.each do |spec| %>
                <b><%= spec.key %>:</b> <%= spec.value %>.
            <% end %>
          </div>
          <div class="clear"></div>
      <% end %>
    </div>

<% end %>
