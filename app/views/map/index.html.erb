<%=javascript_include_tag :defaults %>
<script type="text/javascript"
        src="http://maps.google.com/maps/api/js?sensor=true">
</script>
<script type="text/javascript" language="javascript">
  var your_city = new google.maps.LatLng();
  var your_place = new google.maps.LatLng();
  var map;
  var geocoder = new google.maps.Geocoder();
  var distanceCalc = new google.maps.geometry.Spherical();
  google.maps.event.addDomListener(window, "load", initialize);
  function initialize() {
    var mapOptions = {
      zoom: 15,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: your_city
    };
    map = new google.maps.Map(document.getElementById("map_add"),
    mapOptions);
  }
  
  function google.maps.Marker createMarker(lat, long)
  {
 	var marker = new google.maps.Marker({
	  map:map,
	  draggable:false,
	  animation: google.maps.Animation.DROP,
	  position: new google.maps.LatLng(lat, long)
	});
	return marker;
  }
  
  function markBathrooms(results)
  {
	for (var i =0; i<results.length; i++)
	{
		var marker = createMarker(results[i].address.latitude, results[i].address.longitude);
		var info = createInfo(results[i].bathroom.title,
								results[i].address.inside_location+"\n"+
									results[i].address.street_address+"\n"+
									results[i].address.city+", "+
									results[i].address.state+", "+
									results[i].address.country,
								results[i].bathroom.description,
								results[i].rating.overall);
		google.maps.event.addListener(marker, 'click', function() {
			info.open(map, marker);
		});
	}
  }
  
  function google.maps.InfoWindow createInfo(title, address, description, rating)
  {
	var contentString = "<div id='content'>"+
							"<h1 id='title'>"+title+"</h1>"+
							"<p>"+address+"</p>"+
							"<p>"+description+"</p>"+
							"<p>"+rating+"</p>"+
						"</div>";
						
	return new google.maps.InfoWindow({content: contentString});
  }
  function toggleBounce() {
    if (marker.getAnimation() != null) {
      marker.setAnimation(null);
    } else {
      marker.setAnimation(google.maps.Animation.BOUNCE);
    }
  }
</script>
